<!-- Header avec Material Toolbar -->
<mat-toolbar class="faq-header" role="banner" aria-labelledby="faq-main-title">
  <div class="header-content">
    <h1 id="faq-main-title" class="faq-title">
      Foire <span class="title-highlight">aux</span> Questions
    </h1>
    <p class="faq-subtitle" id="faq-description">
      Trouvez rapidement les réponses à vos questions
    </p>
  </div>
</mat-toolbar>

<div class="faq-container" role="main" aria-labelledby="faq-main-title" aria-describedby="faq-description">

  <!-- Contenu principal dans une Material Card -->
  <mat-card class="faq-content">

    <!-- Résultats de recherche -->
    <div class="search-results" *ngIf="searchQuery.trim()" role="status" aria-live="polite">
      <p class="results-count" id="search-results">
        {{ filteredFAQItems.length }} résultat(s) trouvé(s) pour "{{ searchQuery }}"
      </p>
    </div>

    <!-- Liste des FAQ avec Material Expansion Panel -->
    <mat-accordion class="faq-accordion" role="region" aria-label="Liste des questions fréquentes">
      <mat-expansion-panel 
        *ngFor="let item of filteredFAQItems; let i = index; trackBy: trackByFn"
        class="faq-panel"
        [expanded]="item.isExpanded"
        [attr.aria-labelledby]="'question-' + i"
        [attr.aria-describedby]="'answer-' + i"
      >
        <mat-expansion-panel-header class="faq-header">
          <mat-panel-title class="question-text" [id]="'question-' + i">
            {{ item.question }}
          </mat-panel-title>
        </mat-expansion-panel-header>
        
        <div class="faq-answer" [id]="'answer-' + i" role="region" aria-labelledby="'question-' + i">
          <p>{{ item.reponse }}</p>
        </div>
      </mat-expansion-panel>
    </mat-accordion>

    <!-- Message si aucun résultat -->
    <div 
      class="no-results" 
      *ngIf="filteredFAQItems.length === 0 && (searchQuery.trim() || selectedCategory !== 'all')"
      role="status"
      aria-live="polite"
    >
      <mat-card class="no-results-card">
        <mat-card-content>
          <mat-icon class="no-results-icon" aria-hidden="true">search_off</mat-icon>
          <h3 id="no-results-title">Aucune FAQ trouvée</h3>
          <p aria-describedby="no-results-title">Aucune question ne correspond à vos critères de recherche.</p>
          <button 
            mat-raised-button 
            color="primary"
            (click)="resetFilters()"
            aria-describedby="no-results-title"
          >
            Voir toutes les FAQ
          </button>
        </mat-card-content>
      </mat-card>
    </div>
  </mat-card>

  <!-- Séparateur Material -->
  <mat-divider class="faq-divider" aria-hidden="true"></mat-divider>

  <!-- Section d'aide simplifiée -->
  <div class="help-section" role="complementary" aria-labelledby="help-title">
    <h2 id="help-title" class="help-title">Besoin d'aide supplémentaire ?</h2>
    <button 
      mat-raised-button 
      color="accent"
      (click)="goToContactForm()"
      class="contact-button"
      aria-describedby="help-title"
    >
      Remplir le formulaire
    </button>
  </div>
</div>
<app-footer></app-footer>