
<div class="reservations-container">
  <!-- R√©gion d'annonce accessible -->
  <div class="sr-only" aria-live="polite" [textContent]="liveMessage"></div>
  <!-- Header de la page -->
  <div class="reservations-header">
    <h1>Mes r√©servations</h1>
    <p>G√©rez vos r√©servations et suivez leur statut</p>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="error" class="error-message" role="alert" aria-live="assertive">
    {{ error }}
  </div>

  <!-- Loading spinner -->
  <div *ngIf="isLoading" class="loading-container" aria-busy="true">
    <div class="loading-spinner"></div>
    <output aria-live="polite">Chargement des r√©servations‚Ä¶</output>
  </div>

  <!-- Contenu principal -->
  <div *ngIf="!isLoading" class="reservations-content">
    <!-- Liste des r√©servations -->
    <div class="reservations-list">
      <h2>Liste des r√©servations</h2>

      <!-- Message si aucune r√©servation -->
      <div *ngIf="reservations.length === 0" class="no-reservations">
        <div class="no-reservations-content">
          <div class="no-reservations-icon">üìã</div>
          <h3>Vous n'avez pas encore de r√©servation</h3>
        </div>
      </div>

      <!-- Cartes des r√©servations -->
       <div class="reservation-cards">
         <div
           *ngFor="let reservation of reservations"
           class="reservation-card"

         >
           <div class="header">
             <div class="info">
               <div class="top-line">
                 <h3 class="name">{{ reservation.serviceName || 'Service' }}</h3>
                 <div class="status-badge">
                   {{ getStatusLabel(reservation.status) }}
                 </div>
               </div>

               <div class="rating">
                 <span class="service-date"> Le {{ formatDate(reservation.reservationDate) }}</span>
               </div>
             </div>

             <!-- Bouton "Noter le prestataire" en haut √† droite -->
             <div *ngIf="shouldShowReviewButton(reservation)" class="review-button-container">
               <button
                 class="review-btn"
                 (click)="goToReview(reservation)"
                 type="button"
                 aria-label="Noter le prestataire">
                 Noter le prestataire
               </button>
             </div>
           </div>

           <div class="footer">
              <div class="price">
               <span class="euro">‚Ç¨ {{ formatPrice(reservation.totalPrice) }}</span>
                <span class="unit">/total</span>
              </div>

              <div class="footer-buttons">
                <!-- Bouton "Commencer une conversation" -->
                <button
                  *ngIf="shouldShowConversationButton(reservation)"
                  class="conversation-btn"
                  (click)="startConversation(reservation)"
                  type="button">
                  Commencer une conversation
                </button>

                <!-- Bouton "Voir d√©tails" -->
                <a class="profile-btn" [routerLink]="['/reservations', reservation.id]">Voir d√©tails</a>
              </div>
           </div>
         </div>
       </div>
         </div>
   </div>
 </div>
